# 🚀 Tadakan 実装計画書 ver.0.1

## 1. 開発フェーズ概要

### Phase 1: コア機能実装 (優先度: 高)
- プリセット管理システム
- ファイルリネーム機能
- バッチファイル生成
- 基本GUI

### Phase 2: フィルタリング機能 (優先度: 中)
- フィルタ条件管理
- 一時フォルダ管理
- フィルタGUI

### Phase 3: バッチ管理・拡張機能 (優先度: 低)
- バッチ倉庫管理
- プレビュー機能
- 設定・履歴管理

## 2. アーキテクチャ設計

### 2.1 ディレクトリ構成
```
src/
├── main.py                 # アプリケーションエントリーポイント
├── models/                 # データモデル
│   ├── __init__.py
│   ├── preset.py          # プリセットモデル
│   ├── file_item.py       # ファイル情報モデル
│   └── batch_info.py      # バッチ情報モデル
├── services/               # ビジネスロジック
│   ├── __init__.py
│   ├── preset_manager.py  # プリセット管理
│   ├── file_renamer.py    # ファイルリネーム処理
│   ├── batch_generator.py # バッチファイル生成
│   ├── filter_manager.py  # フィルタリング処理
│   └── file_processor.py  # ファイル操作統合
├── gui/                    # ユーザーインターフェース
│   ├── __init__.py
│   ├── main_window.py     # メインウィンドウ
│   ├── preset_dialog.py   # プリセット編集ダイアログ
│   ├── filter_window.py   # フィルタウィンドウ
│   └── components/        # UIコンポーネント
│       ├── __init__.py
│       ├── file_list.py   # ファイルリスト表示
│       └── preview_panel.py # プレビューパネル
├── utils/                  # ユーティリティ
│   ├── __init__.py
│   ├── file_utils.py      # ファイル操作ユーティリティ
│   ├── validation.py      # バリデーション
│   └── logger.py          # ログ出力
└── config/                 # 設定管理
    ├── __init__.py
    ├── settings.py        # アプリケーション設定
    └── constants.py       # 定数定義
```

### 2.2 技術スタック
- **言語**: Python 3.8+
- **GUI**: tkinter (標準ライブラリ)
- **データ保存**: JSON形式
- **バッチファイル**: Windows .bat形式

## 3. Phase 1: コア機能実装

### 3.1 プリセット管理システム (`services/preset_manager.py`)
```python
# 主要機能
- プリセットの作成・編集・削除
- JSONファイルでの永続化
- プリセット項目の動的定義
- エクスポート/インポート機能
```

### 3.2 ファイルリネーム機能 (`services/file_renamer.py`)
```python
# 主要機能
- プリセットベースの名前生成
- ファイル名重複チェック
- NGワード検証
- プレビュー生成
```

### 3.3 バッチファイル生成 (`services/batch_generator.py`)
```python
# 主要機能
- リネーム用batファイル生成
- フォルダ移動コマンド追加
- エラーハンドリング組み込み
- 実行ログ出力
```

### 3.4 基本GUI (`gui/main_window.py`)
```python
# 主要機能
- プリセット選択コンボボックス
- 入力フォーム動的生成
- ファイル選択・プレビュー
- バッチ生成・実行ボタン
```

## 4. Phase 2: フィルタリング機能

### 4.1 フィルタ条件管理 (`services/filter_manager.py`)
```python
# 主要機能
- AND/OR条件の組み合わせ
- 条件式の評価エンジン
- フィルタ結果のキャッシュ
```

### 4.2 一時フォルダ管理 (`services/temp_folder_manager.py`)
```python
# 主要機能
- 表示用フォルダの作成・管理
- ファイル移動・復元処理
- 移動履歴の記録
```

### 4.3 フィルタGUI (`gui/filter_window.py`)
```python
# 主要機能
- 条件入力フォーム
- 論理演算子選択
- フィルタ実行・解除ボタン
- 結果プレビュー
```

## 5. Phase 3: バッチ管理・拡張機能

### 5.1 バッチ倉庫管理 (`services/batch_storage.py`)
```python
# 主要機能
- バッチファイルのメタデータ管理
- 検索・フィルタ機能
- 使用履歴記録
- お気に入り管理
```

### 5.2 プレビュー機能 (`gui/components/preview_panel.py`)
```python
# 主要機能
- リアルタイムプレビュー
- 変更前後の比較表示
- エラー・警告の可視化
```

### 5.3 設定・履歴管理 (`config/settings.py`)
```python
# 主要機能
- アプリケーション設定の永続化
- 操作履歴の記録
- 設定インポート/エクスポート
```

## 6. 実装順序とマイルストーン

### Milestone 1: 基本リネーム機能 (2週間)
1. プリセットデータモデル実装
2. 基本GUI作成
3. シンプルなリネーム処理
4. バッチファイル生成

### Milestone 2: プリセット管理 (1週間)
1. プリセット編集ダイアログ
2. JSON保存・読み込み
3. エクスポート/インポート

### Milestone 3: フィルタリング機能 (2週間)
1. フィルタ条件UI
2. 一時フォルダ管理
3. フィルタ実行・解除

### Milestone 4: バッチ管理・仕上げ (1週間)
1. バッチ倉庫機能
2. 履歴・お気に入り
3. 最終テスト・調整

## 7. 技術的考慮事項

### 7.1 パフォーマンス
- 大量ファイル処理時の非同期処理
- プレビュー表示の最適化
- メモリ使用量の監視

### 7.2 エラーハンドリング
- ファイルアクセス権限エラー
- ディスク容量不足
- 不正な文字を含むファイル名

### 7.3 拡張性
- プラグインアーキテクチャの準備
- 設定ファイルでの機能ON/OFF
- 新しいファイル形式への対応準備

## 8. テスト戦略

### 8.1 単体テスト
- 各サービスクラスの機能テスト
- バリデーション関数のテスト
- ファイル操作のモックテスト

### 8.2 結合テスト
- GUI操作からバッチ生成までの一連流れ
- プリセット保存・読み込みの整合性
- エラーケースの動作確認

### 8.3 システムテスト
- 実際のファイルでの動作確認
- 大量ファイルでのパフォーマンス確認
- 異常系での安定性確認

---

*この実装計画書は 03_要件定義.md を基に作成されました*