# 📋 Tadakan 要件定義書 ver.0.2 - フルGUI版

## 1. プロジェクトコンセプト

**ビジョン**: 「ストック型バッチ×プリセット自由化×直感ＧＵＩ」の実現
**コアコンセプト**: B63EF9形式プリセットIDとストック型バッチ操作を中心とした最高のファイル管理ツール
**現状**: CLI版Tadakan v0.1からのフルGUI化
**開発方針**: Claude CodeとTDDワークフローによる高品質・高拡張性実装

## 2. コア機能要件

### 2.1 プリセット管理システム
- **FR-101**: 6桁英数字ランダムID（例：B63EF9）による一意プリセット識別
- **FR-102**: プリセット作成・編集・複製・削除の完全GUI化
- **FR-103**: 入力項目の自由追加・順番変更・デフォルト値設定
- **FR-104**: 対象拡張子のプリセット単位での指定（png、mp3、txt等）
- **FR-105**: プリセットエクスポート/インポート（JSON形式）
- **FR-106**: プリセットの説明文・ラベル管理

### 2.2 ストック型バッチファイル運用
- **FR-201**: バッチファイル命名規則：プリセットID_陣営_キャラ名.bat
- **FR-202**: バッチファイルの永続保存と再利用機能
- **FR-203**: 作業用フォルダ内のrename_batchesフォルダでの自動管理
- **FR-204**: バッチファイル一覧表示・検索・削除・複製機能
- **FR-205**: 対象拡張子フィルタ機能内蔵（batごとに処理対象を限定）

### 2.3 ファイルリネーム・移動機能
- **FR-301**: ドラッグ&ドロップによる直感的操作（ファイル・フォルダ対応）
- **FR-302**: 自動連番付与：プリセットID_陣営_キャラ名_A00001.拡張子
- **FR-303**: バッチ単位での連番管理（同一batでの連続処理）
- **FR-304**: 処理済みファイルの作業用フォルダ直下への自動移動
- **FR-305**: 日本語パス・ファイル名の完全対応

### 2.4 フィルタリング機能
- **FR-401**: プリセット項目による条件フィルタリング
- **FR-402**: フィルタ一致ファイルの「display」フォルダへの一時移動
- **FR-403**: フィルター解除による作業用フォルダ直下への復元
- **FR-404**: AND/OR条件の組み合わせ対応
- **FR-405**: フィルタ履歴の保存と再実行機能

### 2.5 GUI・UX機能
- **FR-501**: 統合GUI（ホーム画面）でのワンストップ操作
- **FR-502**: プリセット管理パネル（一覧・選択・編集）
- **FR-503**: 動的入力フォーム生成（プリセットに応じた項目表示）
- **FR-504**: バッチファイル管理エリア（一覧・操作・D&D対応）
- **FR-505**: ファイルドラッグ&ドロップボックス
- **FR-506**: 作業用フォルダパス表示・変更機能
- **FR-507**: 処理結果リスト・エラー通知エリア

### 2.6 作業環境管理
- **FR-601**: デフォルト作業フォルダ：ピクチャ/Tadakan（自動生成）
- **FR-602**: サブフォルダ自動生成：rename_batches、filter_batches、display
- **FR-603**: 作業用フォルダパスのGUIでの変更機能
- **FR-604**: フォルダ構造の自動初期化と管理

## 3. 新規機能要件

### 3.1 簡易フィルタリング機能（Phase2から前倒し）
- **FR-201**: ファイル名による簡易フィルタ（部分一致、正規表現）
- **FR-202**: ファイルサイズ・更新日時による絞り込み
- **FR-203**: フィルタ結果の一時保存機能

### 3.2 バッチ実行管理
- **FR-204**: バッチファイル実行状況の監視
- **FR-205**: 実行結果のレポート生成
- **FR-206**: 失敗したバッチの再実行機能

### 3.3 外部連携機能
- **FR-207**: コマンドライン引数での自動実行モード
- **FR-208**: 設定ファイルによる無人実行モード
- **FR-209**: 他ツールとの連携用API（JSON出力）

## 4. 非機能要件の強化

### 4.1 性能要件の向上
- **NFR-101**: 10,000ファイルの一括処理を5分以内で完了
- **NFR-102**: プレビュー表示を0.5秒以内で反映
- **NFR-103**: アプリケーション起動時間を3秒以内に短縮

### 4.2 信頼性要件の強化
- **NFR-104**: 処理中断時の自動復旧機能
- **NFR-105**: データ破損検知と自動復旧
- **NFR-106**: バッチ実行前の安全性チェック強化

### 4.3 使用性要件の向上
- **NFR-107**: キーボードショートカット対応
- **NFR-108**: 多言語対応の基盤整備（日本語・英語）
- **NFR-109**: アクセシビリティ対応（画面読み上げ対応）

### 4.4 保守性要件の強化
- **NFR-110**: コードカバレッジ80%以上の維持
- **NFR-111**: 自動テスト実行環境の整備
- **NFR-112**: デバッグ機能の強化（詳細ログ、トレース）

## 5. 削除・変更される機能

### 5.1 機能の簡素化
- **CHG-001**: 複雑なフィルタリング機能は次版に延期
- **CHG-002**: バッチ倉庫管理機能はより実用的な形に再設計
- **CHG-003**: GUI複雑化を避け、シンプルな操作性を維持

## 6. 対応優先度

### 高優先度（必須対応）
- FR-101〜FR-104（既存機能品質向上）
- FR-105〜FR-109（ユーザビリティ強化）
- NFR-101〜NFR-103（性能向上）

### 中優先度（可能な限り対応）
- FR-110〜FR-117（データ管理・パフォーマンス）
- FR-201〜FR-203（簡易フィルタ）
- NFR-104〜NFR-109（信頼性・使用性）

### 低優先度（余裕があれば対応）
- FR-118〜FR-121（運用サポート）
- FR-204〜FR-209（外部連携）
- NFR-110〜NFR-112（保守性強化）

## 7. 成功基準

### 7.1 品質指標
- バグ発生率：月間ユーザー操作あたり1件以下
- クラッシュ率：0.1%以下
- 操作完了率：95%以上

### 7.2 性能指標
- 1,000ファイル処理時間：60秒以内
- プレビュー表示時間：0.5秒以内
- アプリ起動時間：3秒以内

### 7.3 ユーザビリティ指標
- 初回利用成功率：80%以上
- 操作エラー率：5%以下
- ユーザー満足度：4.0/5.0以上

## 8. リスク管理

### 8.1 技術リスク
- **RISK-001**: 大量ファイル処理時のメモリ不足
- **RISK-002**: Windows環境依存のバッチファイル実行エラー
- **RISK-003**: 複雑な日本語ファイル名での文字化け

### 8.2 運用リスク
- **RISK-004**: ユーザーデータ（プリセット等）の破損
- **RISK-005**: 既存ユーザーの設定移行問題
- **RISK-006**: パフォーマンス劣化による利用離脱

## 9. 移行計画

### 9.1 既存ユーザー対応
- 既存設定ファイルの自動移行機能
- 移行エラー時のマニュアル復旧手順
- 旧バージョンとの共存期間設定

### 9.2 データ互換性
- プリセットファイル形式の後方互換性維持
- 設定ファイルのバージョン管理
- 移行ログの詳細記録

---

*この要件定義書v0.2は、v0.1の実装結果を踏まえた改修要件を定義しています*